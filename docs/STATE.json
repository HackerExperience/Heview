{
  "game": {
    "account": {
    },
    "server": {
      "$cid": {
        "log": {
          "entry": {
            "$id": {
              "datetime": "Datetime.t",
              "type": "Log.type",
              "data": "map :: Log.data",
              "value": {
                "text": "String.t",
                "html": "hiccup"
              }
            }
          }
        }
      }
      "meta": {
        "player": [
          {
            "type": "string",
            "server_id": "Server.id",
            "nips": ["NIP.t"],
            "endpoints": ["NIP.t"]
          }
        ]
      }
    },
    "story": {}
  },

  "web": {
    "wm": {
      "sessions": {
        "$cid": {
          "gateway": "cid",
          "endpoint": "cid | nil",
          "apps": ["$app-id"]
        }
      },
      "windows": {
        "$app-id": {
          "moving?": "bool",
          "focused?": "bool",
          "position": {
            "x": "int",
            "y": "int"
          },
          "length": {
            "x": "int",
            "y": "int"
          },
          "drag-click": {
            "x": "int",
            "y": "int"
          },
          "z-index": "int"
        }
      },
      "next-open": {
        "x": "int",
        "y": "int"
      },
      "next-z-index": "int",
      "focused-window": "$app-id | nil",
      "window-moving?": "$app-id | nil",
      "active-session": "$cid",
      "viewport": {
        "x": "int",
        "y": "int"
      }
    },

    "apps": {
      "$app-id": {
        "state": {
          "current": {},
          "other": {}
        },
        "meta": {
          "context": ":local | :remote",
          "type": "$app-type",
          "session": "$cid",
          "active-context (app)": "$cid",
          "popup": {
            "parent-id": "$app-id",
            "app-type": "$app-type",
            "popup-type": "$popup-type"
          } | "nil",
          "children": ["$app-id"]
        }
      }
    }
  }
}

// State for each app
{
  "log-viewer": {
    "state": {
      "selected": "Log.id | nil"
    },
    "popups": {
      "log-edit": {
        "state": {
          "server-cid": "$cid",
          "log-id": "Log.id",
          "log": "Log.t" // Copy of `game.server.$cid.log.entry.$id`
        }
      }
    }
  },
  // OS popups

  ""
}
